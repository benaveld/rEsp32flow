// For format details, see https://aka.ms/devcontainer.json. For config options, see the README at:
// https://github.com/microsoft/vscode-dev-containers/tree/v0.234.0/containers/alpine
{
	"name": "Alpine",
	"build": {
		"dockerfile": "Dockerfile",
		// Update 'VARIANT' to pick an Alpine version: 3.12, 3.13, 3.14, 3.15
		"args": { "VARIANT": "3.15" }
	},

  "mounts": [
    "source=/dev,target=/dev,type=bind,consistency=consistent",
    "source=pio,target=${containerWorkspaceFolder}/.pio,type=volume",
    "source=vscode,target=${containerWorkspaceFolder}/.vscode,type=volume",
    "source=data,target=${containerWorkspaceFolder}/data,type=volume", // linked with website/build
    "source=data,target=${containerWorkspaceFolder}/website/build,type=volume", // linked with data
    "source=node_modules,target=${containerWorkspaceFolder}/website/node_modules,type=volume"
  ],

	// Replace when using a ptrace-based debugger like C++, Go, and Rust
	// "runArgs": [ "--init", "--cap-add=SYS_PTRACE", "--security-opt", "seccomp=unconfined" ],
  "runArgs": ["--device-cgroup-rule=c 188:* rwm"],
  "settings": {
    "platformio-ide.customPATH": "/usr/bin",
    "platformio-ide.useBuiltinPIOCore": false,
    "platformio-ide.pioHomeServerHttpHost": "0.0.0.0",
    "platformio-ide.disablePIOHomeStartup": true,
    "cSpell.words": ["reduxjs"]
  },

  "extensions": [
    "platformio.platformio-ide",
    "esbenp.prettier-vscode",
    "msjsdiag.vscode-react-native",
    "dsznajder.es7-react-js-snippets",
    "dbaeumer.vscode-eslint",
    "eamodio.gitlens",
    "DavidAnson.vscode-markdownlint",
    "streetsidesoftware.code-spell-checker"
  ],

	// Comment out to connect as root instead. More info: https://aka.ms/vscode-remote/containers/non-root.
	"remoteUser": "vscode"
}
